include "substances-core.conf"

application.host="https://ase-gsrs-poc-uks-gateway.azurewebsites.net"
ix.home="ginas-ix"

spring.application.name="substances"

hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds=60000
ribbon.ConnectTimeout=3000
ribbon.ReadTimeout=60000

gsrs.validators.substances = [
   {
       "validatorClass" = "ix.ginas.utils.validation.validators.IgnoreValidator",
       "newObjClass" = "ix.ginas.models.v1.Substance",
       "configClass" = "SubstanceValidatorConfig"
   },
   {
       "validatorClass" = "ix.ginas.utils.validation.validators.NullCheckValidator",
       "newObjClass" = "ix.ginas.models.v1.Substance",
   },
   {
       "validatorClass" = "ix.ginas.utils.validation.validators.AutoGenerateUuidIfNeeded",
       "newObjClass" = "ix.ginas.models.v1.Substance",
   },
]

spring.datasource.auto-commit =true
spring.datasource.minimumIdle=5
spring.datasource.maximum-pool-size=50
spring.datasource.connectionTimeout=10000
spring.datasource.idle-timeout=600000
spring.datasource.max-lifetime=1800000

##################################################################
# SPRING BOOT ACTUATOR SETTINGS FOR MICROSERVICE HEALTH CHECKS  ##
##################################################################
# turn off rabbit mq check for now since we don't use it otherwise it will say we are down
management.health.rabbit.enabled: false

server.port=443
ix.ginas.approvalIdGenerator.generatorClass="ix.ginas.utils.UNIIGenerator"

# PUT YOUR PERSONAL EXTENSIONS AND ADDITIONS HERE
#debug=true
spring.main.allow-bean-definition-overriding=true

#this is how HOCON does default values
#eureka.client.serviceUrl.defaultZone= "http://localhost:8761/eureka"
eureka.client.enabled=false

spring.datasource.url="jdbc:mariadb://mariadb-gsrs-poc-uks.mariadb.database.azure.com:3306/gsrs_substances"
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.username=""
spring.datasource.password=""
spring.jpa.hibernate.ddl-auto=update

spring.servlet.multipart.max-file-size=500MB
spring.servlet.multipart.max-request-size=500MB

# NEED THIS for Applications-api, Products-api and ClinicalTrialsUS/Europe-Api
gsrs.microservice.applications.api.baseURL="https://ase-gsrs-poc-uks-gateway.azurewebsites.net/"
gsrs.microservice.products.api.baseURL="https://ase-gsrs-poc-uks-gateway.azurewebsites.net/"
gsrs.microservice.clinicaltrialsus.api.baseURL="https://ase-gsrs-poc-uks-gateway.azurewebsites.net/"
gsrs.microservice.clinicaltrialseurope.api.baseURL="https://ase-gsrs-poc-uks-gateway.azurewebsites.net/"

# Secure session off for dev, but if using HTTPS it's better to have it on
gsrs.sessions.sessionSecure=false

# Standardize Names in accordance with FDA rules
# Uncomment to add name standardization functionality
#gsrs.validators.substances += {
#          "validatorClass" = "ix.ginas.utils.validation.validators.StandardNameValidator",
#          "newObjClass" = "ix.ginas.models.v1.Substance",
#          "configClass" = "SubstanceValidatorConfig",
#          "parameters"= {
#             "inPlaceNameStandardizerClass":"gsrs.module.substance.utils.FDAMinimumNameStandardizer",
#             "fullNameStandardizerClass":"gsrs.module.substance.utils.FDAFullNameStandardizer",
#             "behaviorOnInvalidStdName": "error"
#          }
# }

## Add after StandardNameValidator
# gsrs.validators.substances += {
#         "validatorClass" = "ix.ginas.utils.validation.validators.StandardNameDuplicateValidator",
#         "newObjClass" = "ix.ginas.models.v1.Substance",
#          "parameters"= {
#              "checkDuplicateInOtherRecord" = true,
#              "checkDuplicateInSameRecord" = true,
#              "onDuplicateInOtherRecordShowError" = true,
#              "onDuplicateInSameRecordShowError" = false
#          }
# }

# Manage tags/bracketed terms in names per FDA configuration.
# In FDA's case:
# No automatic addition in tags found in names to explicit tag list.
# No automatic deletion of explicit tags missing from bracketed terms.
# Warnings off for bracket name missing from tags; warning on for explicit tag missing from names. 
# gsrs.validators.substances += {
#    "validatorClass" = "ix.ginas.utils.validation.validators.tags.TagsValidator",
#    "newObjClass" = "ix.ginas.models.v1.Substance",
#    "parameters" = {
#        "checkExplicitTagsExtractedFromNames": false,
#        "checkExplicitTagsMissingFromNames": true,
#        "addExplicitTagsExtractedFromNamesOnCreate": false,
#        "addExplicitTagsExtractedFromNamesOnUpdate": false,
#        "removeExplicitTagsMissingFromNamesOnCreate": false,
#        "removeExplicitTagsMissingFromNamesOnUpdate": false
#    }
# }

